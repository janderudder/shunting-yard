#pragma once
#include <type_traits>
#include <variant>


////////////////////////////////////////////////////////////////////////////////
struct Operator_token
{
    enum class Id { Add, Sub, Mul, Div, Mod } const id;
};




////////////////////////////////////////////////////////////////////////////////
struct Operand_token
{
    double value;
};




////////////////////////////////////////////////////////////////////////////////
using Token = std::variant<Operator_token, Operand_token>;




////////////////////////////////////////////////////////////////////////////////
enum class Token_type { Operator, Operand };




////////////////////////////////////////////////////////////////////////////////
constexpr Token_type token_type(Token const& token)
{
    return std::visit([](auto&& tok) {
        using Tok = std::decay_t<decltype(tok)>;
        return std::is_same_v<Tok, Operator_token>
            ? Token_type::Operator
            : Token_type::Operand;
    }, token);
}
